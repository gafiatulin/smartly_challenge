'use strict'function validate(){  return function* (next) {    if(this.path !== '/api/stats') this.throw('404 / Not Found.', 404);    let query = this.query;    try{      query.ad_ids = (function(){        let result = [];        (new Set(([] + query.ad_ids)        .split(',')        .map(function(x){return parseInt(x, 10)})))        .forEach(function(v){result.push(v)});        return result;      })();      if(query.ad_ids.some(function(v){return Number.isNaN(v)})) throw Error('should be numbers');    }    catch(_){      this.throw('400 / Field %ad_ids% is required and must be a comma-separated list of integers.', 400);    }  }}module.exports = validate;